-- Generated by Oracle SQL Developer Data Modeler 21.4.1.349.1605
--   at:        2022-01-23 21:37:51 CET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE dostawca (
    id_dostawcy     NUMBER(4, 1) NOT NULL,
    nazwa_dostawcy  VARCHAR2(50),
    ilość_materiału NUMBER(10, 1),
    kod_pocztowy    NUMBER(10, 1),
    miejscowość     VARCHAR2(15),
    ulica           VARCHAR2(15)
);

ALTER TABLE dostawca ADD CONSTRAINT dostawca_pk PRIMARY KEY ( id_dostawcy );

CREATE TABLE faktury (
    id_faktura      NUMBER(4, 1) NOT NULL,
    nr_faktury      NUMBER(10, 1),
    nzw_biuro_rach  VARCHAR2(50),
    cena_netto      NUMBER(7, 2),
    cena_brutto     NUMBER(7, 2),
    koszta_projektu NUMBER(7, 2)
);

ALTER TABLE faktury ADD CHECK ( cena_netto BETWEEN 0 AND 300000 );

ALTER TABLE faktury ADD CHECK ( cena_brutto BETWEEN 0 AND 300000 );

ALTER TABLE faktury ADD CHECK ( koszta_projektu BETWEEN 0 AND 300000 );

ALTER TABLE faktury ADD CONSTRAINT faktury_pk PRIMARY KEY ( id_faktura );

CREATE TABLE lokalizacja (
    id_lokalizacja NUMBER(4, 1) NOT NULL,
    kod_pocztowy   NUMBER(10, 1),
    miejscowość    VARCHAR2(15),
    ulica          VARCHAR2(50),
    nr_działki     VARCHAR2(15)
);

ALTER TABLE lokalizacja ADD CONSTRAINT lokalizacja_pk PRIMARY KEY ( id_lokalizacja );

CREATE TABLE nadzór (
    id_nadzór    NUMBER(4, 1) NOT NULL,
    imię         VARCHAR2(15),
    nazwisko     VARCHAR2(50),
    nr_telefon   NUMBER(10, 1),
    nr_uprawnień NUMBER(4, 1)
);

ALTER TABLE nadzór ADD CONSTRAINT nadzór_pk PRIMARY KEY ( id_nadzór );

CREATE TABLE pracownia (
    id_pracownii NUMBER(4, 1) NOT NULL,
    nazwa_prac   VARCHAR2(50),
    kod_pocz     NUMBER(10, 1),
    miejscowość  VARCHAR2(15),
    ulica        VARCHAR2(50),
    nr_bud       NUMBER(10, 1)
);

ALTER TABLE pracownia ADD CONSTRAINT pracownia_pk PRIMARY KEY ( id_pracownii );

CREATE TABLE pracownik (
    id_pracownik           NUMBER(4, 1) NOT NULL,
    imię                   VARCHAR2(50) NOT NULL,
    nazwisko               VARCHAR2(50) NOT NULL,
    nr_telefon             NUMBER(10, 1) NOT NULL,
    kod_pocz               NUMBER(10, 1) NOT NULL,
    miejscowość            VARCHAR2(15) NOT NULL,
    ulica                  VARCHAR2(50) NOT NULL,
    nr_bud                 NUMBER(10, 1) NOT NULL,
    pracownia_id_pracownii NUMBER(4, 1) NOT NULL,
    pracownik_id_pracownik NUMBER(4, 1)
);

ALTER TABLE pracownik ADD CONSTRAINT pracownik_pk PRIMARY KEY ( id_pracownik );

CREATE TABLE proj_prac (
    projekt_id_projektu    NUMBER(4, 1) NOT NULL,
    pracownia_id_pracownii NUMBER(4, 1) NOT NULL
);

ALTER TABLE proj_prac ADD CONSTRAINT proj_prac_pk PRIMARY KEY ( projekt_id_projektu,
                                                                pracownia_id_pracownii );

CREATE TABLE projekt (
    id_projektu                    NUMBER(4, 1) NOT NULL,
    data_zamówienia                DATE,
    termin_projekt                 DATE,
    wycena                         NUMBER(7, 2),
    pracownik_id_pracownik         NUMBER(4, 1) NOT NULL,
    zleceniodawca_id_zleceniodawcy NUMBER(4, 1) NOT NULL,
    lokalizacja_id_lokalizacja     NUMBER(4, 1) NOT NULL,
    nadzór_id_nadzór               NUMBER(4, 1) NOT NULL,
    wykonawca_id_wykonawca         NUMBER(4, 1) NOT NULL,
    faktury_id_faktura             NUMBER(4, 1) NOT NULL
);

ALTER TABLE projekt ADD CHECK ( wycena BETWEEN 0 AND 300000 );

CREATE UNIQUE INDEX projekt__idx ON
    projekt (
        faktury_id_faktura
    ASC );

CREATE UNIQUE INDEX projekt__idxv1 ON
    projekt (
        lokalizacja_id_lokalizacja
    ASC );

ALTER TABLE projekt ADD CONSTRAINT projekt_pk PRIMARY KEY ( id_projektu );

CREATE TABLE wykonawca (
    id_wykonawca         NUMBER(4, 1) NOT NULL,
    nazwa_wykonawcy      VARCHAR2(50),
    kod_pocztowy         NUMBER(10, 1),
    miejscowość          VARCHAR2(15),
    ulica                VARCHAR2(50),
    nr_budynku           NUMBER(10, 1),
    dostawca_id_dostawcy NUMBER(4, 1) NOT NULL
);

ALTER TABLE wykonawca ADD CONSTRAINT wykonawca_pk PRIMARY KEY ( id_wykonawca );

CREATE TABLE zleceniodawca (
    id_zleceniodawcy NUMBER(4, 1) NOT NULL,
    nazwa_zlec       VARCHAR2(50),
    nip              NUMBER(10, 1),
    kod_pocz         NUMBER(10, 1),
    miejscowość      VARCHAR2(15),
    ulica            VARCHAR2(50),
    nr_budynku       NUMBER(10, 1),
    nr_telefon       NUMBER(10, 1)
);

ALTER TABLE zleceniodawca ADD CONSTRAINT zleceniodawca_pk PRIMARY KEY ( id_zleceniodawcy );

ALTER TABLE pracownik
    ADD CONSTRAINT pracownik_pracownia_fk FOREIGN KEY ( pracownia_id_pracownii )
        REFERENCES pracownia ( id_pracownii );

ALTER TABLE pracownik
    ADD CONSTRAINT pracownik_pracownik_fk FOREIGN KEY ( pracownik_id_pracownik )
        REFERENCES pracownik ( id_pracownik );

ALTER TABLE proj_prac
    ADD CONSTRAINT proj_prac_pracownia_fk FOREIGN KEY ( pracownia_id_pracownii )
        REFERENCES pracownia ( id_pracownii );

ALTER TABLE proj_prac
    ADD CONSTRAINT proj_prac_projekt_fk FOREIGN KEY ( projekt_id_projektu )
        REFERENCES projekt ( id_projektu );

ALTER TABLE projekt
    ADD CONSTRAINT projekt_faktury_fk FOREIGN KEY ( faktury_id_faktura )
        REFERENCES faktury ( id_faktura );

ALTER TABLE projekt
    ADD CONSTRAINT projekt_lokalizacja_fk FOREIGN KEY ( lokalizacja_id_lokalizacja )
        REFERENCES lokalizacja ( id_lokalizacja );

ALTER TABLE projekt
    ADD CONSTRAINT projekt_nadzór_fk FOREIGN KEY ( nadzór_id_nadzór )
        REFERENCES nadzór ( id_nadzór );

ALTER TABLE projekt
    ADD CONSTRAINT projekt_pracownik_fk FOREIGN KEY ( pracownik_id_pracownik )
        REFERENCES pracownik ( id_pracownik );

ALTER TABLE projekt
    ADD CONSTRAINT projekt_wykonawca_fk FOREIGN KEY ( wykonawca_id_wykonawca )
        REFERENCES wykonawca ( id_wykonawca );

ALTER TABLE projekt
    ADD CONSTRAINT projekt_zleceniodawca_fk FOREIGN KEY ( zleceniodawca_id_zleceniodawcy )
        REFERENCES zleceniodawca ( id_zleceniodawcy );

ALTER TABLE wykonawca
    ADD CONSTRAINT wykonawca_dostawca_fk FOREIGN KEY ( dostawca_id_dostawcy )
        REFERENCES dostawca ( id_dostawcy );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            10
-- CREATE INDEX                             2
-- ALTER TABLE                             25
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
